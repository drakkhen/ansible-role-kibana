[Unit]
{% if item is defined %}
Description=Kibana - {{ item }}
{% else %}
Description=Kibana
{% endif %}

[Service]
Type=simple
User=kibana
Group=kibana
# Load env vars from /etc/default/ and /etc/sysconfig/ if they exist.
# Prefixing the path with '-' makes it try to load, but if the file doesn't
# exist, it continues onward.
EnvironmentFile=-/etc/default/kibana
EnvironmentFile=-/etc/sysconfig/kibana
{% if item is defined %}
ExecStart=/usr/share/kibana/bin/kibana "-c {{ kibana_etc }}/kibana-{{ item }}.yml"
{% else %}
ExecStart=/usr/share/kibana/bin/kibana "-c {{ kibana_etc }}/kibana.yml"
{% endif %}
Restart=always
WorkingDirectory=/

[Install]
WantedBy=multi-user.target
